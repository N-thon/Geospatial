<html>
  <head>
    <title>Shapefile Demo</title>
    <!-- Loads the FlighttLines.shp file into THREE.js -->

    <!-- Three.js library and movement controls -->
    <script src="lib/three.js"></script>
    <script src="lib/shapefile/shapefile.js"></script>
    <script src="lib/shapefile/ShapefileLoader.js"></script>
    <script src="lib/OrbitControls.js"></script>
  </head>
  <body>
    <style>
      html,
      body {
        padding: 0;
        margin: 0;
      }
    </style>
    <script type="text/JavaScript">

        //New scene and camera
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.01, 100000);

        //New Renderer
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);


        const loader = new ShapefileLoader();

         // load shapefiles and change colors

         const shpFL = loader.load("./test_shapefile/FlightLines.shp").then((shp) => {
            scene.add(shp.node);
            shp.node.traverse(node => {
         	    if(node.material){
                node.material.color.setRGB(0, 1, 0)
              }
            });
          })


         const shpPL = loader.load("./test_shapefile/PhotoLocations.shp").then((shp) => {
            scene.add(shp.node);
            shp.node.traverse(node => {
         	    if(node.material){
                node.material.color.setRGB(0, 1, 1)
              }
            });
         })


         //mooves camera to shapefile location
         camera.position.z = 1000;
         camera.position.x = 545720;
         camera.position.y = 259010;

         //Enable controls
         var controls = new THREE.OrbitControls(camera, renderer.domElement);
         controls.target.x =  545720;
         controls.target.y = 259010;
         controls.target.z = 118.003;        
         
         
         //Render the image
         function render() {
             controls.update();
             requestAnimationFrame(render);
             renderer.render(scene, camera);
         }

         render();
    </script>
  </body>
</html>
