<html>
  <head>
    <title>Shapefile Demo</title>
    <!-- Loads the FlighttLines.shp file into THREE.js -->

    <!-- Three.js library, movement controls, and jquery-->
    <script src="lib/three.js"></script>
    <script src="lib/shapefile/shapefile.js"></script>
    <script src="lib/shapefile/ShapefileLoader.js"></script>

    <script src="lib/OrbitControls.js"></script>
    <!-- <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script> -->
  </head>
  <body>
    <style>
      html,
      body {
        padding: 0;
        margin: 0;
      }
    </style>
    <script type="text/JavaScript">

                 //New scene and camera
                 var scene = new THREE.Scene();
                 var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.01, 100000);

                 //New Renderer
                 var renderer = new THREE.WebGLRenderer();
                 renderer.setSize(window.innerWidth, window.innerHeight);
                 document.body.appendChild(renderer.domElement);


                 const loader = new ShapefileLoader();
      //    loader.transform = transform;

         // group all shapefile scene nodes into this node
        //  const shapeNode = new THREE.Object3D();
        // scene.add(shapeNode);

         // load natural.shp and change colors to green

         const shpFL = loader.load("./test_shapefile/FlightLines.shp").then((shp) => {
            //console.log("individual lines", shp)
            scene.add(shp.node);
            // shapeNode.add(shp);

            shp.node.traverse(node => {
         	if(node.material){
                             node.material.color.setRGB(0, 1, 0)
                         }
                     });

         })


         const shpPL = loader.load("./test_shapefile/PhotoLocations.shp").then((shp) => {
            console.log("individual lines", shp)
            scene.add(shp.node);
            // shapeNode.add(shp);

            shp.node.traverse(node => {
         	if(node.material){
                             node.material.color.setRGB(0, 1, 1)
                         }
                     });

         })

         //console.log("the scene", scene);
         camera.position.z = 1000;
         camera.position.x = 545720;
         camera.position.y = 259010;

        //  camera.updateWorldMatrix();



                 //Enable controls
                 var controls = new THREE.OrbitControls(camera, renderer.domElement);
                 //controls.minDistance = 1;
                 //controls.zoomSpeed = 0.01;
                 //controls.panSpeed = 0.01;
                 //controls.rotateSpeed = 0.01;
                 controls.target.x =  545720;
                 controls.target.y = 259010;
                 controls.target.z = 4.003;



                 //console.log(controls);

                 //Render the image
                 function render() {
                     controls.update();
                     requestAnimationFrame(render);
                     renderer.render(scene, camera);
                 }

                 render();
    </script>
  </body>
</html>
